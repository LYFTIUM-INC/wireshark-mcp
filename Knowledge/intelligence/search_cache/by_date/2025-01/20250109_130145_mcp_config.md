# Search Results: Claude Code MCP configuration setup ~/.claude.json mcpServers
**Date**: 2025-01-09T13:01:45
**Keywords**: claude code mcp configuration setup ~/.claude.json mcpservers
**Hash**: 3f8a9b2c
**Type**: websearch

## Results

### Claude Code MCP Configuration Setup - Complete Guide

The Model Context Protocol (MCP) allows Claude Code to connect to hundreds of external tools and data sources through an open-source standard for AI-tool integrations. Configuration is primarily managed through the `~/.claude.json` file.

### Complete ~/.claude.json Structure Example

```json
{
  // UI and display settings
  "numStartups": 34,
  "autoUpdaterStatus": "enabled",
  "theme": "dark-daltonized",
  "hasCompletedOnboarding": true,
  "lastOnboardingVersion": "0.2.42",
  "lastReleaseNotesSeen": "0.2.45",
  "shiftEnterKeyBindingInstalled": true,
  
  // API key management
  "customApiKeyResponses": {
    "approved": ["last-20-chars-of-api-key"],
    "rejected": []
  },
  
  // OAuth account information
  "oauthAccount": {
    "accountUuid": "",
    "emailAddress": "",
    "organizationUuid": "",
    "organizationRole": "",
    "workspaceRole": ""
  },
  
  // Project-specific configurations
  "projects": {
    "/path/to/your/project": {
      // Allowed tools for this project
      "allowedTools": [
        "Task", "Bash", "Bash(git log:*)", "Glob", "Grep", 
        "LS", "Read", "Edit", "MultiEdit", "Write", 
        "WebFetch", "WebSearch"
      ],
      
      // Command history
      "history": ["command1", "command2"],
      
      // Example files
      "exampleFiles": ["file1.js", "file2.js"],
      
      // Project-specific MCP servers
      "mcpServers": {
        "filesystem": {
          "command": "npx",
          "args": [
            "-y",
            "@modelcontextprotocol/server-filesystem",
            "/Users/username/Desktop",
            "/path/to/allowed/dir"
          ]
        }
      }
    }
  },
  
  // Global MCP servers (available across all projects)
  "mcpServers": {
    // Filesystem server
    "filesystem": {
      "command": "npx",
      "args": [
        "-y",
        "@modelcontextprotocol/server-filesystem",
        "/Users/username/Desktop",
        "/Users/username/Downloads"
      ]
    },
    
    // Memory server
    "memory": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-memory"]
    },
    
    // Fetch server
    "fetch": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-fetch"]
    },
    
    // Sequential thinking server
    "sequential-thinking": {
      "type": "stdio",
      "command": "npx",
      "args": [
        "-y",
        "@modelcontextprotocol/server-sequential-thinking"
      ]
    },
    
    // GitHub server with environment variables
    "github": {
      "command": "node",
      "args": [
        "/path/to/servers/src/github/dist/index.js"
      ],
      "env": {
        "GITHUB_PERSONAL_ACCESS_TOKEN": "your-github-pat-here"
      }
    },
    
    // SQLite server
    "sqlite": {
      "command": "npx",
      "args": [
        "mcp-server-sqlite",
        "--db-path",
        "/path/to/your/database.db"
      ]
    },
    
    // Omnisearch server with multiple API keys
    "mcp-omnisearch": {
      "type": "stdio",
      "command": "npx",
      "args": ["-y", "mcp-omnisearch"],
      "env": {
        "TAVILY_API_KEY": "your-tavily-key",
        "BRAVE_API_KEY": "your-brave-key",
        "KAGI_API_KEY": "your-kagi-key",
        "PERPLEXITY_API_KEY": "your-perplexity-key",
        "JINA_AI_API_KEY": "your-jina-key",
        "FIRECRAWL_API_KEY": "your-firecrawl-key"
      }
    },
    
    // Docker-based MCP server
    "puppeteer": {
      "command": "docker",
      "args": [
        "run",
        "-i",
        "--rm",
        "--init",
        "-e",
        "DOCKER_CONTAINER=true",
        "mcp/puppeteer"
      ]
    },
    
    // HTTP/SSE server example
    "api-server": {
      "type": "sse",
      "url": "${API_BASE_URL:-https://api.example.com}/mcp",
      "headers": {
        "Authorization": "Bearer ${API_KEY}"
      }
    }
  },
  
  // Permission settings
  "permissions": {
    "deny": [
      "Bash(git add --all:*)",
      "Bash(git add --force:*)",
      "Bash(git add -A:*)",
      "Bash(git push:*)",
      "Bash(rm -rf: *)"
    ]
  }
}
```

### Key Configuration Options

1. **MCP Server Types**:
   - **stdio**: Standard input/output communication (default)
   - **sse**: Server-sent events for HTTP-based servers

2. **Required Fields**:
   - `command`: The command to execute the server
   - `args`: Array of arguments passed to the command

3. **Optional Fields**:
   - `type`: Communication protocol type
   - `env`: Environment variables for the server
   - `url`: For HTTP/SSE servers
   - `headers`: HTTP headers for SSE servers

4. **Location Hierarchy**:
   - Project-specific: `.claude/settings.local.json` (in project directory)
   - User-specific: `~/.claude.json` or `~/.claude/settings.local.json`

5. **Environment Variable Support**:
   - Claude Code supports environment variable expansion using `${VAR_NAME}` syntax
   - Default values can be specified: `${VAR_NAME:-default-value}`

### Best Practices for 2025

1. **Direct Configuration File Editing** (Recommended):
   - Avoid the CLI wizard which requires perfect input on first try
   - Direct editing allows quick setup, modification, and maintenance
   - Especially useful for complex configurations with many parameters

2. **CLI Commands** (Alternative method):
   - Add server: `claude mcp add [name] --scope user`
   - List servers: `claude mcp list`
   - Remove server: `claude mcp remove [name]`
   - Test server: `claude mcp get [name]`

3. **Configuration Scopes**:
   - **Local scope** (default): Private to you, project-specific
   - **User scope**: Use for development servers (`--scope user`)
   - **Project scope**: For team-shared configurations

4. **Security Considerations**:
   - Never hardcode secrets directly in configuration
   - Use environment variables for sensitive data
   - Only grant access to directories you're comfortable with Claude modifying
   - Third-party MCP servers are used at your own risk

5. **Performance Optimization**:
   - Limit active servers to avoid system slowdowns
   - Monitor resource usage with heavy servers like Puppeteer
   - Use project-specific servers only when needed

6. **Troubleshooting**:
   - Launch Claude Code with `--mcp-debug` flag for debugging
   - Check connection status with `/mcp` command in Claude Code
   - Verify `npx` is in system PATH for npm-based servers
   - On Windows, use `cmd /c` wrapper for npx commands

### Essential MCP Servers for 2025

1. **Filesystem**: Local file operations
2. **Memory**: Persistent context storage
3. **Fetch**: Web content retrieval
4. **GitHub**: Repository management
5. **Sequential Thinking**: Complex problem-solving
6. **Database servers**: PostgreSQL, SQLite, etc.
7. **API integrations**: Apidog, REST clients
8. **Search servers**: Omnisearch, web search
9. **Docker-based servers**: Puppeteer, Playwright
10. **Custom servers**: Project-specific tools

### Quick Start Example

```json
{
  "mcpServers": {
    "filesystem": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-filesystem", "/home/user"]
    },
    "memory": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-memory"]
    }
  }
}
```

After editing, restart Claude Code for changes to take effect.

### References
- [Configuring MCP Tools in Claude Code - The Better Way](https://scottspence.com/posts/configuring-mcp-tools-in-claude-code)
- [Connect to Local MCP Servers - Model Context Protocol](https://modelcontextprotocol.io/quickstart/user)
- [Connect Claude Code to tools via MCP - Anthropic](https://docs.anthropic.com/en/docs/claude-code/mcp)
- [Ultimate Guide to Claude MCP Servers & Setup | 2025](https://generect.com/blog/claude-mcp/)
- [The 10 Must-Have MCP Servers for Claude Code (2025 Developer Edition)](https://garysvenson09.medium.com/the-10-must-have-mcp-servers-for-claude-code-2025-developer-edition-79c7a0aebb12)

---
*Cached by 10X Agentic Intelligence System*